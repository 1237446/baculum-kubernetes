# ======================================================================
# Archivo de configuración de Bacula File Daemon (bacula-fd.conf)
# Para ser usado en: Máquina Agente Windows (Externa a Kubernetes)
# Ubicación típica: C:\Program Files\Bacula\bacula-fd.conf
# ======================================================================

# ---
# 1. Definición del Agente (Este propio File Daemon)
# ---
FileDaemon {
  # ¡IMPORTANTE! Este es el nombre de tu agente Windows.
  # Debe ser único. No uses "bacula-fd" (que ya usas en K8s).
  Name = mi-pc-windows-fd

  FDport = 9102                    # Puerto en el que escucha este agente.
  Maximum Concurrent Jobs = 20
  
  # Rutas de directorios para Windows (Bacula prefiere /)
  WorkingDirectory = "C:/Program Files/Bacula/working"
  Pid Directory = "C:/Program Files/Bacula/working"
  Plugin Directory = "C:/Program Files/Bacula/plugins"
}

# ---
# 2. Autorización del Director (El "Jefe" en Kubernetes)
# ---
Director {
  Name = bacula-dir
  # Esta es la contraseña que el Director (bacula-dir) usará 
  # para autenticarse con ESTE agente Windows.
  # DEBE COINCIDIR con la contraseña que definas en el "Client" 
  # del bacula-dir.conf (en Kubernetes).
  Password = "[INGRESA_AQUI_UNA_CONTRASEÑA_SEGURA_PARA_ESTE_AGENTE]" 
}

# ---
# 3. Autorización del Monitor (Baculum)
# ---
Director {
  Name = bacula-mon
  # Esta es la contraseña del monitor que ya tienes
  Password = "nm6na6cCh3NymDV6JteWL0Fir71A5uhrdRjmnRKjnHn5"
  Monitor = yes
}

# ---
# 4. Manejo de Mensajes (La parte clave)
# ---
Messages {
  Name = Standard
  # Esta es la modificación importante.
  # "daemon" guarda los logs localmente en el agente Windows
  # (por ejemplo, en el Visor de Eventos) en lugar de intentar contactar 
  # al Director (lo cual fallaría).
  daemon = all, !skipped, !restored
}
